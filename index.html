<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="screen-orientation" content="landscape">
    <meta name="theme-color" content="#1a1a2e">
    <title>2D Pool Game</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="manifest" href="manifest.json">
    <script type="importmap">
    {
        "imports": {
            "planck": "https://esm.sh/planck-js@1.0.6"
        }
    }
    </script>
</head>
<body>
    <div id="loading-screen">
        <div class="loading-content">
            <h1>2D Pool</h1>
            <div class="loading-spinner"></div>
            <p>Loading...</p>
        </div>
    </div>
    <div id="game-container">
        <canvas id="game-canvas"></canvas>
        <div id="ui-overlay">
            <div id="main-menu" class="menu menu-compact">
                <h1>2D Pool</h1>
                <div class="menu-grid">
                    <!-- Table Selector Card -->
                    <div class="selector-card" id="table-selector">
                        <div class="card-label">Table</div>
                        <div class="card-preview">
                            <canvas id="table-preview" width="120" height="60"></canvas>
                        </div>
                        <div class="card-name" id="table-name">Classic Green</div>
                        <button class="card-btn" id="btn-change-table">Change</button>
                    </div>
                    <!-- Ball Set Selector Card -->
                    <div class="selector-card" id="ball-selector">
                        <div class="card-label">Ball Set</div>
                        <div class="card-preview ball-preview" id="ball-set-preview"></div>
                        <div class="card-name" id="ball-set-name">American</div>
                        <button class="card-btn" id="btn-change-balls">Change</button>
                    </div>
                    <!-- Game Mode Card -->
                    <div class="selector-card game-mode-card">
                        <div class="card-label">Game Mode</div>
                        <div class="game-mode-buttons">
                            <button id="btn-8ball" class="mode-btn">8-Ball (US)</button>
                            <button id="btn-uk8ball" class="mode-btn">8-Ball (UK)</button>
                            <button id="btn-9ball" class="mode-btn">9-Ball</button>
                            <button id="btn-snooker" class="mode-btn">Snooker</button>
                            <button id="btn-freeplay" class="mode-btn">Free Play</button>
                        </div>
                    </div>
                </div>
                <button id="btn-fullscreen" class="menu-btn small mobile-only">Fullscreen</button>
                <!-- Hidden elements for compatibility -->
                <input type="checkbox" id="sound-toggle" checked style="display:none">
                <input type="range" id="speed-slider" min="0.2" max="2" step="0.1" value="1" style="display:none">
                <span id="speed-value" style="display:none">1.0x</span>
                <select id="table-select" style="display:none">
                    <option value="1">Classic Green</option>
                    <option value="2">Blue Felt</option>
                    <option value="3">Red Felt</option>
                    <option value="4">Tournament</option>
                    <option value="5">Luxury</option>
                    <option value="6">Glass</option>
                    <option value="7">UK Pub</option>
                    <option value="8">Mini Snooker</option>
                    <option value="9">Full-Size Snooker</option>
                </select>
                <select id="uk-color-scheme" style="display:none">
                    <option value="red-yellow">Red/Yellow</option>
                    <option value="blue-yellow">Blue/Yellow</option>
                </select>
            </div>

            <!-- Table Selection Modal -->
            <div id="table-modal" class="modal hidden">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>Select Table</h2>
                        <button class="modal-close" id="close-table-modal">&times;</button>
                    </div>
                    <div class="table-grid" id="table-grid">
                        <!-- Table thumbnails will be populated by JS -->
                    </div>
                </div>
            </div>

            <!-- Ball Set Selection Modal -->
            <div id="ball-modal" class="modal hidden">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>Select Ball Set</h2>
                        <button class="modal-close" id="close-ball-modal">&times;</button>
                    </div>
                    <div class="ball-set-grid" id="ball-set-grid">
                        <!-- Ball set previews will be populated by JS -->
                    </div>
                    <button class="create-custom-btn" id="btn-create-custom">+ Create Custom Set</button>
                </div>
            </div>

            <!-- Custom Ball Set Creator Modal -->
            <div id="creator-modal" class="modal hidden">
                <div class="modal-content creator-content">
                    <div class="modal-header">
                        <h2>Create Custom Ball Set</h2>
                        <button class="modal-close" id="close-creator-modal">&times;</button>
                    </div>
                    <div class="creator-layout-v2">
                        <div class="creator-row">
                            <div class="creator-field name-field">
                                <label for="custom-set-name">Set Name</label>
                                <input type="text" id="custom-set-name" placeholder="My Custom Set" maxlength="20">
                            </div>
                            <div class="creator-field">
                                <label>Style</label>
                                <div class="style-toggle">
                                    <button class="style-btn active" data-style="solid" id="style-solid">Solid</button>
                                    <button class="style-btn" data-style="stripe" id="style-stripe">Spots & Stripes</button>
                                </div>
                            </div>
                        </div>

                        <div class="creator-preview-row">
                            <div class="preview-balls" id="creator-preview-balls"></div>
                        </div>

                        <!-- Solid mode options -->
                        <div class="solid-options" id="solid-options">
                            <div class="color-row">
                                <div class="color-field">
                                    <label for="color-group1">Group 1 (1-7)</label>
                                    <input type="color" id="color-group1" value="#CC0000">
                                </div>
                                <div class="color-field">
                                    <label for="color-group2">Group 2 (9-15)</label>
                                    <input type="color" id="color-group2" value="#FFD700">
                                </div>
                                <div class="color-field">
                                    <label for="color-8ball">8-Ball</label>
                                    <input type="color" id="color-8ball" value="#000000">
                                </div>
                            </div>
                            <label class="checkbox-label">
                                <input type="checkbox" id="striped-8ball">
                                Striped 8-Ball
                            </label>
                        </div>

                        <!-- Stripe mode options -->
                        <div class="stripe-options hidden" id="stripe-mode-options">
                            <div class="color-row" id="simple-color-pickers">
                                <div class="color-field">
                                    <label for="color-solids">Solids (1-7)</label>
                                    <input type="color" id="color-solids" value="#FFD700">
                                </div>
                                <div class="color-field">
                                    <label for="color-stripes">Stripes (9-15)</label>
                                    <input type="color" id="color-stripes" value="#0000CD">
                                </div>
                                <div class="color-field">
                                    <label for="color-8ball-stripe">8-Ball</label>
                                    <input type="color" id="color-8ball-stripe" value="#000000">
                                </div>
                                <div class="color-field">
                                    <label for="color-stripe-bg">Stripe Background</label>
                                    <input type="color" id="color-stripe-bg" value="#FFFFFF">
                                </div>
                            </div>
                            <label class="checkbox-label">
                                <input type="checkbox" id="advanced-mode">
                                Individual Ball Colors
                            </label>
                            <div class="advanced-color-pickers hidden" id="advanced-color-pickers">
                                <div class="ball-color-grid">
                                    <div class="color-field ball-color"><label>1 & 9</label><input type="color" data-pair="1" value="#FFD700"></div>
                                    <div class="color-field ball-color"><label>2 & 10</label><input type="color" data-pair="2" value="#0000CD"></div>
                                    <div class="color-field ball-color"><label>3 & 11</label><input type="color" data-pair="3" value="#FF0000"></div>
                                    <div class="color-field ball-color"><label>4 & 12</label><input type="color" data-pair="4" value="#4B0082"></div>
                                    <div class="color-field ball-color"><label>5 & 13</label><input type="color" data-pair="5" value="#FF8C00"></div>
                                    <div class="color-field ball-color"><label>6 & 14</label><input type="color" data-pair="6" value="#006400"></div>
                                    <div class="color-field ball-color"><label>7 & 15</label><input type="color" data-pair="7" value="#800000"></div>
                                    <div class="color-field ball-color"><label>8</label><input type="color" data-pair="8" value="#000000"></div>
                                </div>
                            </div>
                            <div class="number-style-row">
                                <div class="color-field">
                                    <label for="color-number-circle">Number Circle</label>
                                    <input type="color" id="color-number-circle" value="#FFFFFF">
                                </div>
                                <div class="color-field">
                                    <label for="color-number-text">Number Text</label>
                                    <input type="color" id="color-number-text" value="#000000">
                                </div>
                                <label class="checkbox-label border-checkbox">
                                    <input type="checkbox" id="number-border">
                                    Border
                                </label>
                                <div class="color-field border-color-field hidden" id="border-color-field">
                                    <input type="color" id="color-number-border" value="#000000">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="creator-actions">
                        <button class="cancel-btn" id="btn-cancel-creator">Cancel</button>
                        <button class="save-btn" id="btn-save-custom">Save Ball Set</button>
                    </div>
                </div>
            </div>
            <div id="game-hud" class="hidden">
                <div class="game-menu-container">
                    <button id="btn-game-menu" class="game-menu-btn" title="Menu">&#x2630;</button>
                    <div id="game-menu-dropdown" class="game-menu-dropdown hidden">
                        <button id="btn-quit-game" class="game-menu-item">Quit to Menu</button>
                    </div>
                </div>
                <div id="player-indicator"></div>
                <div id="ball-groups"></div>
                <div id="foul-indicator" class="hidden">FOUL</div>
                <div id="game-message"></div>
                <div id="touch-hint" class="mobile-only">Touch &amp; drag to aim, release to shoot</div>
            </div>
            <div id="snooker-hud" class="hidden">
                <div id="snooker-score"></div>
                <div id="snooker-break" class="hidden"></div>
                <div id="snooker-target"></div>
            </div>
            <div id="game-over" class="menu hidden">
                <h2 id="winner-text"></h2>
                <div class="menu-buttons">
                    <button id="btn-play-again" class="menu-btn">Play Again</button>
                    <button id="btn-main-menu" class="menu-btn">Main Menu</button>
                </div>
            </div>
            <div id="freeplay-controls" class="hidden">
                <button id="btn-rerack" class="menu-btn small">Re-rack</button>
                <button id="btn-exit-freeplay" class="menu-btn small">Exit</button>
            </div>
        </div>
        <button id="btn-fullscreen-float" class="fullscreen-float mobile-only" title="Fullscreen">&#x26F6;</button>
    </div>

    <script type="module" src="js/main.js"></script>
</body>
</html>
